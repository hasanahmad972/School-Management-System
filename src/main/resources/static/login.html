<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | ABC School</title>
    <link rel="stylesheet" href="login.css">
</head>
<body>
    <header class="h">
        <div>ABC School</div>
        <div>Login</div>
    </header>

    <nav class="h">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="login.html">Login</a></li>
            <li><a href="signup.html">Sign Up</a></li>
        </ul>
    </nav>

    <main>
        <section class="login-section">
            <h2>Login</h2>
            <form action="#" method="POST" class="login-form" id="login">
                <label for="userType">User Type</label>
                <select id="userType" name="userType" required>
                    <option value="">--Select User Type--</option>
                    <option value="teacher">Teacher</option>
                    <option value="student">Student</option>
                </select>

                <label for="email">Email</label>
                <input type="email" id="email" name="email" placeholder="Enter your email" required>

                <label for="password">Password</label>
                <input type="password" id="password" name="password" placeholder="Enter your password" required>

                <button type="submit">Login</button>
            </form>
            <p>Don't have an account? <a href="signup.html">Sign Up</a></p>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 ABC School | All Rights Reserved</p>
    </footer>
	            <script>
					document.getElementById("login").addEventListener('submit',async function(e){
						e.preventDefault();
						const user_type=document.getElementById("userType").value;
						if(user_type==="teacher"){
						const email=document.getElementById("email").value;
						const password = document.getElementById('password').value;
						
						// Create JSON object
						const loginObj = {email, password};
						
						try{
							// Send POST request to Spring Boot controller
							const response = 
							await fetch(
								'http://localhost:8081/teacher/login', {
							    method: 'POST',
							    headers: { 'Content-Type': 'application/json' },
							    body: JSON.stringify(loginObj)
							}
							);
							const result = await response.text();
							if (response.ok) {
							            alert(result); // show "Teacher added successfully!"
							            window.location.href = 'abc.html'; // redirect to login page
							        } else {
							            alert('Error: ' + result);
							        }

							
						}
						catch(error){
							alert("network error: "+error);
						}}
						else{
							alert("student login page ws not devloped")
						}
						
						
					})
					
				</script>
</body>
</html>
